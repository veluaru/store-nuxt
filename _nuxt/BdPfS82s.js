import{P as a}from"./rv5oAsuf.js";import{u as i}from"./EIFIQGdO.js";const c=a("product",{state:()=>({list:[],currentProduct:null,isLoading:!1,error:null,offset:0,limit:10,searchResults:[],isSearching:!1,searchError:null}),actions:{async getProducts(s=!1){if(this.isLoading)return this.list;this.isLoading=!0,this.error=null;let t=[];try{return s&&(this.offset=0,this.list=[]),t=await i().getProductsList(this.offset,this.limit),t.length===0?this.list:(this.list.push(...t),this.offset+=this.limit,this.list)}catch(r){throw this.error=r.message||"Error al cargar productos.",r}finally{this.isLoading=!1}},async getProductById(s){this.isLoading=!0,this.error=null,this.currentProduct=null;try{const r=await i().getProductById(s);this.currentProduct=r}catch(t){this.error=t.message||"Error al cargar producto.",this.currentProduct=null}finally{this.isLoading=!1}},async searchProducts(s){if(this.isSearching=!0,this.searchError=null,this.searchResults=[],!s||s.trim()===""){this.isSearching=!1;return}try{const t=i();this.searchResults=await t.searchProductsByTitle(s.trim())}catch(t){this.searchError=t.message||`Error al realizar la b√∫squeda para: "${s}"`}finally{this.isSearching=!1}}}});export{c as u};
